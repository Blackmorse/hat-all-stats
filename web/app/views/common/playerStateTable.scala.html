@import models.web.WebPagedEntities
@import models.clickhouse.PlayersState
@import service.DefaultService
@import models.web.ViewData
@import models.web.AbstractWebDetails

@(viewData: ViewData[PlayersState, AbstractWebDetails])(implicit messages: Messages)

@playerStates = @{viewData.webPagedEntities}
@formatter = @{java.text.NumberFormat.getIntegerInstance}
<table>
    <tr>
        <th class="position hint" popped-hint="Position">P</th>
        <th>Player</th>
        <th>Team </th>
        <th class="value">League</th>
        <th class="value">Age</th>
        <th class="value">TSI</th>
        <th class="value">Salary, @viewData.details.league.getCountry.getCurrencyName</th>
        <th class="value hint" popped-hint="Rating">Rat</th>
        <th class="value hint" popped-hint="Rating End Of Match">REM</th>
        <th class="value hint" popped-hint="Injury">Inj</th>
        <th class="value hint" popped-hint="Red Cards">RC</th>
        <th class="value hint" popped-hint="Yellow Cards">YC</th>
    </tr>
    @for((playerState, index) <- playerStates.entities.zipWithIndex) {
    <tr>
        <td>@{DefaultService.PAGE_SIZE * playerStates.pageInfo.page + index + 1}</td>
        <td>@{playerState.firstName + " " + playerState.lastName}</td>
        <td><a href="@routes.TeamController.matches(playerState.teamId)">@playerState.teamName</a></td>
        <td class="value"><a href="@routes.LeagueUnitController.bestTeams(playerState.leagueUnitId)">@playerState.leagueUnitName</a></td>
        <td class="value">@playerState.age</td>
        <td class="value">@formatter.format(playerState.tsi)</td>
        <td class="value">
            @{formatter.format((playerState.salary / viewData.details.league.getCountry.getCurrencyRate).toInt)}
        </td>
        <td class="value">@playerState.rating</td>
        <td class="value">@playerState.ratingEndOfMatch</td>
        <td class="value">
            <svg width="10px" height="10px">
                <line x1="0" y1="5" x2="10" y2="5" style="stroke:rgb(255,0,0);stroke-width:2"></line>
                <line x1="5" y1="0" x2="5" y2="10" style="stroke:rgb(255,0,0);stroke-width:2"></line>
            </svg>
            @{if(playerState.injuryLevel == -1) 0 else playerState.injuryLevel}

        </td>
        <td class="value"><span class="red card"></span><span class="mult">x</span>@playerState.redCards</td>
        <td class="value"><span class="yellow card"></span><span class="mult">x</span>@playerState.yellowCards</td>
    </tr>
    }
</table>

@pageNav(playerStates.pageInfo)